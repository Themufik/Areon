{% extends 'main/base.html' %}

{% block title %}{% if lesson %}–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–∫{% else %}–°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫{% endif %}{% endblock %}

{% block extra_css %}
<style>
    .form-container {
        max-width: 800px;
        margin: 0 auto;
        background: white;
        padding: 2rem;
        border-radius: 10px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .form-container h1 {
        margin-bottom: 2rem;
        color: #2c3e50;
    }

    .course-info {
        background: #f8f9fa;
        padding: 1rem;
        border-radius: 5px;
        margin-bottom: 2rem;
    }

    .form-group {
        margin-bottom: 1.5rem;
    }

    .form-group label {
        display: block;
        margin-bottom: 0.5rem;
        font-weight: bold;
        color: #333;
    }

    .form-group input,
    .form-group textarea {
        width: 100%;
        padding: 0.8rem;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 1rem;
        font-family: inherit;
    }

    .form-group textarea {
        min-height: 150px;
        resize: vertical;
    }

    .form-group textarea.content {
        min-height: 300px;  /* –ë–æ–ª—å—à–µ –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
    }

    .form-group input[type="number"] {
        width: 100px;
    }

    .form-group input[type="file"] {
        padding: 0.5rem;
    }

    .form-actions {
        display: flex;
        gap: 1rem;
        margin-top: 2rem;
    }

    .hint {
        font-size: 0.9rem;
        color: #666;
        margin-top: 0.3rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="form-container">
    <h1>{% if lesson %}‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Ä–æ–∫{% else %}‚ûï –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫{% endif %}</h1>

    <div class="course-info">
        <strong>–ö—É—Ä—Å:</strong> {{ course.name }}
    </div>

    <form method="POST" enctype="multipart/form-data">
        {% csrf_token %}

        <div class="form-group">
            <label for="title">–ù–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞ *</label>
            <input
                type="text"
                id="title"
                name="title"
                value="{% if lesson %}{{ lesson.title }}{% endif %}"
                required
                maxlength="200"
                placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö"
            >
        </div>

        <div class="form-group">
            <label for="order">–ü–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä *</label>
            <input
                type="number"
                id="order"
                name="order"
                value="{% if lesson %}{{ lesson.order }}{% else %}{{ next_order }}{% endif %}"
                required
                min="1"
            >
            <div class="hint">–û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø–æ—Ä—è–¥–æ–∫ —É—Ä–æ–∫–∞ –≤ –∫—É—Ä—Å–µ (1, 2, 3...)</div>
        </div>

        <div class="form-group">
            <label for="description">–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —É—Ä–æ–∫–∞ *</label>
            <textarea
                id="description"
                name="description"
                required
                placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ —Å—Ç—É–¥–µ–Ω—Ç—ã –∏–∑—É—á–∞—Ç..."
            >{% if lesson %}{{ lesson.description }}{% endif %}</textarea>
            <div class="hint">–≠—Ç–æ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤–∏–¥–Ω–æ –≤ —Å–ø–∏—Å–∫–µ —É—Ä–æ–∫–æ–≤</div>
        </div>

        <div class="form-group">
            <label for="content">–°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ —É—Ä–æ–∫–∞ *</label>
            <textarea
                id="content"
                name="content"
                class="content"
                required
                placeholder="–ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç —É—Ä–æ–∫–∞, –æ–±—ä—è—Å–Ω–µ–Ω–∏—è, –ø—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –∏ —Ç.–¥..."
            >{% if lesson %}{{ lesson.content }}{% endif %}</textarea>
            <div class="hint">–û—Å–Ω–æ–≤–Ω–æ–π –º–∞—Ç–µ—Ä–∏–∞–ª —É—Ä–æ–∫–∞ - —Ç–µ–æ—Ä–∏—è, –ø—Ä–∏–º–µ—Ä—ã, –∑–∞–¥–∞–Ω–∏—è</div>
        </div>

        <div class="form-group">
            <label for="file">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã (–≤–∏–¥–µ–æ, PDF, –¥–æ–∫—É–º–µ–Ω—Ç)</label>
            <input
                type="file"
                id="file"
                name="file"
                accept=".pdf,.doc,.docx,.mp4,.avi,.mov,.zip"
            >
            {% if lesson and lesson.file %}
                <div class="hint">
                    –¢–µ–∫—É—â–∏–π —Ñ–∞–π–ª: <a href="{{ lesson.file.url }}" target="_blank">{{ lesson.file.name }}</a>
                </div>
            {% endif %}
            <div class="hint">–ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ - –º–æ–∂–Ω–æ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –≤–∏–¥–µ–æ, –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—é –∏–ª–∏ –¥—Ä—É–≥–∏–µ —Ñ–∞–π–ª—ã</div>
        </div>

        <div class="form-actions">
            <button type="submit" class="btn btn-success">
                {% if lesson %}üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è{% else %}‚úÖ –°–æ–∑–¥–∞—Ç—å —É—Ä–æ–∫{% endif %}
            </button>
            <a href="{% if lesson %}{% url 'lesson_detail' lesson.id %}{% else %}{% url 'course_detail' course.id %}{% endif %}"
               class="btn">
                ‚ùå –û—Ç–º–µ–Ω–∞
            </a>
        </div>
    </form>
</div>
{% endblock %}